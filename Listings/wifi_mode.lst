C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE WIFI_MODE
OBJECT MODULE PLACED IN .\Objects\wifi_mode.obj
COMPILER INVOKED BY: D:\ProgramFiles\Keil_v5\C51\BIN\C51.EXE source\wifi_mode.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\
                    -include) DEBUG OBJECTEXTEND PRINT(.\Listings\wifi_mode.lst) OBJECT(.\Objects\wifi_mode.obj)

line level    source

   1          //Í·ÎÄ¼þheader file//
   2          #include "app_main.h"
   3          
   4          //ºê¶¨Òåmacro definition//
   5          
   6          //ÀàÐÍ¶¨Òåbyte definition//
   7          
   8          //±äÁ¿¶¨Òåvariable definition//
   9          uint8_t  code Week_Table[]={0x01,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80};
  10          
  11          char  code SPASongs_Num_Table[7][24]= 
  12          {
  13                  "$$${MusicStatus:[07]}\r\n",
  14                  "$$${MusicStatus:[01]}\r\n",
  15                  "$$${MusicStatus:[02]}\r\n",
  16                  "$$${MusicStatus:[03]}\r\n",
  17                  "$$${MusicStatus:[04]}\r\n",
  18                  "$$${MusicStatus:[05]}\r\n",
  19                  "$$${MusicStatus:[06]}\r\n",
  20          };
  21          
  22          //±êÖ¾Î´¶¨Òåflags definetion//
  23          
  24          //º¯ÊýÉùÃ÷Function declaration//
  25          //void Program1_LaterNum();
  26          
  27          //º¯Êý¶¨Òåfunction definetion//
  28          /*******************************************************************
  29          º¯ÊýÔ­ÐÍ£º
  30          ÊäÈë²ÎÊý£º
  31          Êä³ö²ÎÊý£º
  32          º¯Êý¹¦ÄÜ£º±È½Ï»ñµÃµÄ¿ØÖÆÖ¸ÁîÓëÔ¤ÏÈÉè¶¨µÄÖ¸Áî¶Ô±ÈÊÇ·ñÒ»ÖÂ£¬Èç¹ûÒ»ÖÂ¾ÍÖ´ÐÐÏà¹Ø¹¦ÄÜ£¬·ñÔòÎÞ²Ù×÷
  33          *******************************************************************/
  34          uint8_t char_compare( char *source,  char *dest)
  35          {
  36   1              while(*dest)
  37   1              {       
  38   2                      if((*source!=*dest)||(*source==0)||(*dest==0))
  39   2                              return 1;
  40   2                      source++;
  41   2                      dest++;
  42   2              }
  43   1              return 0;
  44   1      }
  45          
  46          /*******************************************************************
  47          º¯ÊýÔ­ÐÍ£º
  48          ÊäÈë²ÎÊý£º
  49          Êä³ö²ÎÊý£º
  50          º¯Êý¹¦ÄÜ£º°Ñ×Ö·û×ª»¯Îª´úÂë
  51          *******************************************************************/
  52          char char_to_hex(char indata1,char indata2)
  53          {
  54   1              if(indata1>='A')
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 2   

  55   1                      indata1=((indata1-'A')+0x0A);
  56   1              else
  57   1                      indata1=(indata1-'0');
  58   1              if(indata2>='A')
  59   1                      indata2=((indata2-'A')+0x0A);
  60   1              else
  61   1                      indata2=(indata2-'0');
  62   1              return ((indata1<<4)|indata2);
  63   1      }
  64          
  65          /*******************************************************************
  66          º¯ÊýÔ­ÐÍ£º
  67          ÊäÈë²ÎÊý£º
  68          Êä³ö²ÎÊý£º
  69          º¯Êý¹¦ÄÜ£º°Ñ×Ö·û×ª»¯Îª´úÂë
  70          *******************************************************************/
  71          char char_to_bcd(char indata1,char indata2)
  72          {
  73   1              if(indata1>='A')
  74   1                      indata1=((indata1-'A')+0x0A);
  75   1              else
  76   1                      indata1=(indata1-'0');
  77   1              if(indata2>='A')
  78   1                      indata2=((indata2-'A')+0x0A);
  79   1              else
  80   1                      indata2=(indata2-'0');
  81   1              return (indata1*10+indata2);
  82   1      }
  83          
  84          /*******************************************************************
  85          º¯ÊýÔ­ÐÍ£º
  86          ÊäÈë²ÎÊý£º
  87          Êä³ö²ÎÊý£º
  88          º¯Êý¹¦ÄÜ£º°ÑÒª·¢ËÍµÄÐ­Òé×ª»¯Îª×Ö·û
  89          *******************************************************************/
  90          void hex_to_char(uint8_t *p,uint8_t indata)
  91          {
  92   1              uint8_t tmp;
  93   1              tmp=indata>>4;
  94   1              if(tmp>=0x0A)
  95   1               *p=((tmp-0x0A)+'A'); 
  96   1              else
  97   1               *p=(tmp+'0');
  98   1              p++;
  99   1              tmp=indata&0x0F;
 100   1              if(tmp>=0x0A)
 101   1                      *p=((tmp-0x0A)+'A'); 
 102   1              else
 103   1                      *p=(tmp+'0');
 104   1      }
 105          
 106          /*******************************************************************
 107          º¯ÊýÔ­ÐÍ£º
 108          ÊäÈë²ÎÊý£º
 109          Êä³ö²ÎÊý£º
 110          º¯Êý¹¦ÄÜ£º¿ª»úÒª·¢ËÍµÄÃüÁîºÍÏà¹Ø²Ù×÷£¬Õâ¸ö¿ª»úÊÇ°´¼ü°´ÏÂ¿ª»úºÍ½ÓÊÕµ½¡°turn on¡±¿ª»ú£¬
 111                    ÆäËûapp·¢ËÍÑÕÉ«²¢¿ª»úÊ±GP389_ON_APP()º¯Êý
 112          *******************************************************************/
 113          void GP389_ON(void) //
 114          {
 115   1              PlayMode=PLAY_ON;
 116   1              PlayMode=((PlayMode_bk==PLAY_MUSIC)?PLAY_MUSIC:PLAY_ON);//Èç¹û¹Ø»úÊ±ÊÇmusicÄ£Ê½£¬¿ª»ú»Ø¸´´ËÄ£Ê½
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 3   

 117   1              sys_volume=sys_volume_bk;
 118   1              color_mode=color_mode_bk;
 119   1              //Light_Brightness=((Light_Brightness==0)?1:Light_Brightness);//¹Ø»úÖ®Ç°Èç¹ûÁÁ¶ÈÎª0¾Í»Ö¸´Îª1£¬·ñÔòÎª¹Ø»úÖ
             -®Ç°ÁÁ¶È//2018.4.9¹Ø»úÖ®Ç°ÁÁ¶ÈÎª0£¬¿ª»úÒ²Îª0
 120   1              ApplicationGP389_ONOFF((PlayMode==PLAY_OFF)?1:0);
 121   1              
 122   1              Uart0_SendString_3Step=3;
 123   1      }
 124          
 125          /*******************************************************************
 126          º¯ÊýÔ­ÐÍ£º
 127          ÊäÈë²ÎÊý£º
 128          Êä³ö²ÎÊý£º
 129          º¯Êý¹¦ÄÜ£ºapp·¢ËÍÑÕÉ«¡¢µÆ¹â¡¢ÒôÀÖ¸ø»úÌ¨£¨´ËÊ±»úÌ¨Îª¹Ø»ú×´Ì¬£©£¬È»ºó¿ª»ú£¬³ýÁËÒôÁ¿ÆäËû²»»Ö¸´£¬
 130                    Ö»½ÓÊÜÐÂµÄ¹¦ÄÜ²Ù×÷(ÑÕÉ«¡¢µÆ¹â¡¢ÒôÀÖ)
 131          *******************************************************************/
 132          void GP389_ON_APP(void) //
 133          {
 134   1              PlayMode=PLAY_ON;
 135   1              sys_volume=sys_volume_bk;
 136   1              //Light_Brightness=((Light_Brightness==0)?1:Light_Brightness);//¹Ø»úÖ®Ç°Èç¹ûÁÁ¶ÈÎª0¾Í»Ö¸´Îª1£¬·ñÔòÎª¹Ø»úÖ
             -®Ç°ÁÁ¶È//2018.4.9¹Ø»úÖ®Ç°ÁÁ¶ÈÎª0£¬¿ª»úÒ²Îª0
 137   1              ApplicationGP389_ONOFF((PlayMode==PLAY_OFF)?1:0);
 138   1              Uart0_SendString_3Step=3;
 139   1      }
 140          
 141          /*******************************************************************
 142          º¯ÊýÔ­ÐÍ£º
 143          ÊäÈë²ÎÊý£º
 144          Êä³ö²ÎÊý£º
 145          º¯Êý¹¦ÄÜ£º°´¼ü¹Ø»úºÍapp¿ØÖÆ¹Ø»úÖ´ÐÐµÄ
 146          *******************************************************************/
 147          void GP389_OFF(void) //
 148          {
 149   1              PlayMode_bk=PlayMode;
 150   1              PlayMode=PLAY_OFF;
 151   1              sys_volume_bk=sys_volume;
 152   1              color_mode_bk=color_mode;
 153   1              color_mode=COLOR_OFF;
 154   1              TimerMode=cntTimer=TIMER_OFF;//
 155   1              ApplicationGP389_ONOFF((PlayMode==PLAY_OFF)?1:0);
 156   1              Uart0_SendString_3Step=3;
 157   1      }
 158          
 159          /*******************************************************************
 160          º¯ÊýÔ­ÐÍ£º
 161          ÊäÈë²ÎÊý£º
 162          Êä³ö²ÎÊý£º
 163          º¯Êý¹¦ÄÜ£ºÄÖÖÓÔÚÏìÓ¦Ê±²Ù×÷ÔÚAPPÉÏµ÷ÁËµÆ¹âÁÁ¶È£¬ÒôÁ¿´óÐ¡£¬Ôò¹Ø±ÕÄÖÁå²¢¹Ø»ú£¬ÔÚappÉÏµãÁËÌØ¶¨
 164                    ÑÕÉ«µÄµÆ¹â£¬»òÕßµãÁËÌØ¶¨ÒôÀÖ£¬»òÕßµãÁËprogram,ÄÇÃ´ÄÖÖÓÍ£Ö¹£¬ÏìÓ¦ËùµãµÄ²Ù×÷
 165          *******************************************************************/
 166          //void GP389_OFF_AND_AlarmOFF()//ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 167          //{
 168          //      alarm.Runing=0;
 169          //      gbKeyNone=0;
 170          //      GP389_OFF();
 171          //      //color_mode=COLOR_OFF;
 172          //      Uart0_SendString_3Step=5;
 173          //      ApplicationGP389_ONOFF((PlayMode==PLAY_OFF)?1:0);       
 174          //      TimerMode=cntTimer=alarm.cntTimer=TIMER_OFF;    
 175          //      return;
 176          //}
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 4   

 177          
 178          /*******************************************************************
 179          º¯ÊýÔ­ÐÍ£º
 180          ÊäÈë²ÎÊý£º
 181          Êä³ö²ÎÊý£º
 182          º¯Êý¹¦ÄÜ£ºÉêÇë¿ª¹Ø»úÊ±µ÷ÓÃ´Ëº¯Êý
 183          *******************************************************************/
 184          void ApplicationGP389_ONOFF(uint8_t onoff)
 185          {//$$${GpSta:[00,00,01,01,FFFFFF,03,0A,00,1E;00,01,00,FFFFFF,03,0A,01,FF,17:3B,FF]}\r\n
 186   1       //Êý×éÖÐµÚÊý¾ÝÒÔ¶ººÅ·Ö¸ô£¬Êý×ÖÒÔ 16 ½øÖÆ±íÊ¾£¨ÕâÀï²»Ð´"0x"£©£¬´Ó×óµ½ÓÒÒÀ´ÎÃ¿¸ö×Ö¶Î£¨Ç°10¸ö×Ö¶Î£©·Ö±ð±íÊ¾£
             -º
 187   1       //¡·ÊÇ·ñ¹Ø»ú,00ÊÇ¿ª»ú£¬01ÊÇ¹Ø»ú
 188   1       //¡·´ú±íµÚ¼¸Ê×¸è£¨01 - 06£©
 189   1       //¡·´ú±í¿ª¹ØµÆ£¨00¹Ø 01¿ª£©
 190   1       //¡·´ú±íÊÇ·ñÊÇ²ÊµÆÄ£Ê½£¨00 ¹Ø 01 ¿ª£©£¨×¢£º²ÊµÆÑ­»·£¬Îª1¿ªÆôÑ­»·£©
 191   1       //¡·´ú±íµÆµÄRGBÖµ£¨000000 - FFFFFF£©£¨²ÊµÆÑ­»·Õâ¸öÖµÎª000000£©
 192   1       //¡·´ú±íÁÁ¶È( 00 - 03 )
 193   1       //¡·´ú±íÒôÁ¿Öµ ( 00 - 0A )
 194   1       //¡·´ú±íÔÝÍ£pauseÑ¡Ôñ£¨00±íÊ¾Õý³£²¥·Å,01±íÊ¾ÔÝÍ£²¥·Å£©
 195   1       //¡·´ú±í¶¨Ê±Æ÷£¬00(¹Ø/²»¿ªÆô¶¨Ê±)£¬0F(15min)£¬1E(30min)£¬3C(60min)   
 196   1       //¡·Ó¢ÎÄ·ÖºÅ¡°;¡±¸ô¿ªÕâÁ½²¿·ÖÃüÁî
 197   1       //¡·ÄÖÖÓ¿ØÖÆÐÅÏ¢£ºÊý×éÖÐµÚÊý¾ÝÒÔ¶ººÅ·Ö¸ô£¬Êý×ÖÒÔ 16 ½øÖÆ±íÊ¾£¨ÕâÀï²»Ð´"0x"£©£¬´Ó×óµ½ÓÒÒÀ´ÎÃ¿¸ö×Ö¶Î£¨10¸ö×
             -Ö¶Î£©·Ö±ð±íÊ¾£º
 198   1       //¡·´ú±í Alarm µÄ ID ºÅ £¨×¢£ºÏÖÔÚÖ»ÓÐÒ»¸öÄÖÖÓ£¬Ä¬ÈÏÎª0£©
 199   1       //¡·´ú±íµÚ¼¸Ê×¸è£¨01 - 06£©
 200   1       //¡·´ú±íÊÇ·ñÊÇ²ÊµÆÄ£Ê½£¨00 ¹Ø 01 ¿ª£©£¨×¢£º²ÊµÆÑ­»·£¬Îª1¿ªÆôÑ­»·£©
 201   1       //¡·´ú±íµÆµÄRGBÖµ£¨000000 - FFFFFF£©£¨²ÊµÆÑ­»·Õâ¸öÖµÎª000000£©
 202   1       //¡·´ú±íÁÁ¶È( 00 - 03 )
 203   1       //¡·´ú±íÒôÁ¿Öµ ( 00 - 0a )
 204   1       //¡·´ú±íÄÖÖÓ×Ü¿ª¹Ø£¨00 ¹Ø 01: ¿ª£©£¨Ä¬ÈÏ0£©
 205   1       //¡·´ú±íÖÜÒ»µ½ÖÜÈÕµÄ¿ª¹Ø£¬Ã¿Ò»ÌìÓÃÒ»¸ö bit ±íÊ¾
 206   1       //  0x80 ´ú±íÊÇ·ñÖØ¸´ÄÖÁå
 207   1       //  0x01 ´ú±íÖÜÒ»Æô¶¯ÄÖÁå£¬µ«ÊÇÖ»ÏìÒ»´Î£¬ÕâÒ»´ÎÊÇÆßÌìÖ®ÄÚµÄ£¬
 208   1       //  0xFF ´ú±íÄÖÁåÈ«¿ª£¬²¢ÇÒÃ¿ÖÜÖØ¸´£¬ÒÔ´ËÀàÍÆ
 209   1       //  BIT            7       6    5    4    3    2    1    0
 210   1       //  ÐÇÆÚx   repeat  ÈÕ  Áù  Îå  ËÄ  Èý  ¶þ  Ò»  £¨×¢£ºrepeatÎªÃ¿ÖÜ¶¼ÖØ¸´ÄÖÁå£¬·ñÔòÖ»ÏìÒ»´Î£¬ÕâÒ»´Î
 211   1       //  ÊÇÆßÌìÖ®ÄÚµÄ£¬¼ÙÈç¶¨Ê±13:00£¬²»ÖØ¸´£¬ÄÇÕâ´Î¼ÆÊ±µ½(7*24*60-1)minÖ®ºó½áÊø£¬¼´ÆßÌìÖ®ºó
 212   1       //  µÄ12:59·Ö£©
 213   1       //¡·´ú±íÄÖÖÓÊ±¼ä£¨17:3B£©(¶¼ÊÇ16½øÖÆ,:×ó±ßÊÇÄÖÖÓµÄÊ±£¬·¶Î§ÊÇ00-17; :ÓÒ±ßÊÇÄÖÖÓµÄ·Ö£¬·¶Î§ÊÇ00-3B)
 214   1       //¡·´ú±íÏìÁåÊ±¼ä£¨charÀàÐÍ1¸ö×Ö½Ú£©00-FF (µ¥Î»:·ÖÖÓ)
 215   1              char i;
 216   1      //      char code respGP389_AllSta[]={"$$${GpSta:[00,00,00,00,000000,00,00,00,00;00,00,00,000000,00,00,00,00,00
             -:00,00]}\r\n"};
 217   1              char code respGP389_AllSta[]={"$$${GpSta:[00,00,00,00,000000,00,00,00,00]}\r\n"};//ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ
             -±ÎÁË
 218   1              do{WDT_clear();} while(Uart0_EnableSend);
 219   1              Count200ms_3Step=0;
 220   1              //Uart0_SendString_3Step=0;
 221   1              for(i=0;i<UART0_LEN_BUFFER;i++)
 222   1                      Uart0_TransmitBuffer[i]=0x00;
 223   1              //for(i=0;i<82;i++)//ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 224   1              for(i=0;i<41;i++)
 225   1                      Uart0_TransmitBuffer[i]=respGP389_AllSta[i];
 226   1              hex_to_char(&Uart0_TransmitBuffer[11],onoff);
 227   1              hex_to_char(&Uart0_TransmitBuffer[14],((PlayMode==PLAY_MUSIC)?spa_name:7));//Ê×ÏÈÅÐ¶ÏÊÇ²»ÊÇÒôÀÖÄ£Ê½£¬Èç¹û
             -ÊÇ£¬ÊÇµÚ¼¸Ê×¸è£¬Èç¹û²»ÊÇ¾Í·µ»ØÔÝÍ££¬7
 228   1              hex_to_char(&Uart0_TransmitBuffer[17],((color_mode==COLOR_OFF)?0:1));//Îª1Ê±ÊÇÒª¹Ø»ú£¬ËùÒÔÒªºÍcolor_mode_
             -bk¶Ô±È£¬Îª0ÊÇÒª¿ª»ú£¬ÒÑ¾­°Ñcolor_mode_bk¸³Öµ¸øcolor_mode
 229   1              hex_to_char(&Uart0_TransmitBuffer[20],((color_mode==COLOR_CHANGE)?1:0));
 230   1              hex_to_char(&Uart0_TransmitBuffer[23],userR_val);
 231   1              hex_to_char(&Uart0_TransmitBuffer[25],userG_val);       
 232   1              hex_to_char(&Uart0_TransmitBuffer[27],userB_val);
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 5   

 233   1              hex_to_char(&Uart0_TransmitBuffer[30],Light_Brightness);
 234   1              hex_to_char(&Uart0_TransmitBuffer[33],sys_volume);
 235   1              hex_to_char(&Uart0_TransmitBuffer[36],enable_SPApause);
 236   1              hex_to_char(&Uart0_TransmitBuffer[39],cntTimer);
 237   1      //      hex_to_char(&Uart0_TransmitBuffer[42],00);//ÄÖÖÓIDºÅÄ¬ÈÏÎª0   //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 238   1      //      hex_to_char(&Uart0_TransmitBuffer[45],alarm.spa_name);//Ê×ÏÈÅÐ¶ÏÊÇ²»ÊÇÒôÀÖÄ£Ê½£¬Èç¹ûÊÇ£¬ÊÇµÚ¼¸Ê×¸è£¬Èç¹
             -û²»ÊÇ¾Í·µ»ØÔÝÍ££¬7
 239   1      //      hex_to_char(&Uart0_TransmitBuffer[48],((alarm.color_mode==COLOR_CHANGE)?1:0));//ÊÇ·ñÊÇ²ÊµÆÄ£Ê½£¨Ñ­»·½¥±
             -äÄ£Ê½£©
 240   1      //      hex_to_char(&Uart0_TransmitBuffer[51],alarm.userR_val);
 241   1      //      hex_to_char(&Uart0_TransmitBuffer[53],alarm.userG_val); 
 242   1      //      hex_to_char(&Uart0_TransmitBuffer[55],alarm.userB_val);
 243   1      //      hex_to_char(&Uart0_TransmitBuffer[58],alarm.Brightness);//ÁÁ¶È
 244   1      //      hex_to_char(&Uart0_TransmitBuffer[61],alarm.volume);//ÒôÁ¿
 245   1      //      hex_to_char(&Uart0_TransmitBuffer[64],alarm.Enable); //ÄÖÖÓ×Ü¿ª¹Ø
 246   1      //      hex_to_char(&Uart0_TransmitBuffer[67],alarm.Week);  //ÄÖÖÓÖÜ¼¸ÏìµÍ4Î»
 247   1      //      hex_to_char(&Uart0_TransmitBuffer[70],alarm.Hour);  //ÄÖÖÓ¶¨Ê±µÄÊ±¼ä£¬Ð¡Ê±µÍËÄÎ»
 248   1      //      hex_to_char(&Uart0_TransmitBuffer[73],alarm.Minute);//ÄÖÖÓ¶¨Ê±µÄÊ±¼ä£¬·ÖÖÓµÍËÄÎ»
 249   1      //      hex_to_char(&Uart0_TransmitBuffer[76],alarm.Duration);//ÄÖÖÓÏìÁåÊ±¼ä£¬µÍËÄÎ»
 250   1              Uart0_SendString_3Step=2;
 251   1              Uart0_Tx_Pointer=0;
 252   1              Uart0_EnableSend=1;
 253   1              Uart0_Tx_TimeOut=10;    
 254   1              USI0DR=Uart0_TransmitBuffer[Uart0_Tx_Pointer++];
 255   1              if(cntFlag_ON_OFF==0)
 256   1                      cntFlag_ON_OFF=2;
 257   1      }
 258          
 259          /*******************************************************************
 260          º¯ÊýÔ­ÐÍ£º
 261          ÊäÈë²ÎÊý£º
 262          Êä³ö²ÎÊý£º
 263          º¯Êý¹¦ÄÜ£º´®¿Ú½ÓÊÕµ½µÄÃüÁîÐ­ÒéºÍÔ¤¶¨µÄÐ­Òé¶Ô±ÈÈ·¶¨ÊÇÄÄ¸ö½ø¶øÖ´ÐÐ²Ù×÷£¬·ñÔòÎÞ²Ù×÷
 264          *******************************************************************/
 265          void Wifi_CommandDeal(char *Uart0_Receive)
 266          {
 267   1              uint8_t i;
 268   1              char *WIFI_CMD;
 269   1              WIFI_CMD=&Uart0_Receive[3];
 270   1      //      if(char_compare(WIFI_CMD,"{AlarmSet")==0)//ok  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 271   1      //      {//$$${AlarmSet:[00,01,00,01,FFFFFF,03,0A,00,00,FF,17:3B,FF,0a/20/00/12/01/01/02]}\r\n
 272   1      //       //Êý×éÖÐµÚÊý¾ÝÒÔ¶ººÅ·Ö¸ô£¬Êý×ÖÒÔ 16 ½øÖÆ±íÊ¾£¨ÕâÀï²»Ð´"0x"£©£¬´Ó×óµ½ÓÒÒÀ´ÎÃ¿¸ö×Ö¶Î£¨10¸ö×Ö¶Î£©·Ö±ð±íÊ¾
             -£º
 273   1      //       //¡·´ú±í Alarm µÄ ID ºÅ £¨×¢£ºÏÖÔÚÖ»ÓÐÒ»¸öÄÖÖÓ£¬Ä¬ÈÏÎª0£©
 274   1      //       //¡·´ú±íµÚ¼¸Ê×¸è£¨01 - 06£©
 275   1      //       //¡·´ú±í¿ª¹ØµÆ£¨00¹Ø 01¿ª£©
 276   1      //       //¡·´ú±íÊÇ·ñÊÇ²ÊµÆÄ£Ê½£¨00 ¹Ø 01 ¿ª£©£¨×¢£º²ÊµÆÑ­»·£¬Îª1¿ªÆôÑ­»·,£©
 277   1      //       //¡·´ú±íµÆµÄRGBÖµ£¨000000 - FFFFFF£©£¨²ÊµÆÑ­»·Õâ¸öÖµÎª000000£©
 278   1      //       //¡·£¨È¥µô£©´ú±íµÆÑÕÉ«µÄÏÂ±ê£¬Óëapp½çÃæÖÐµÆÒ»ÖÂ£¬·½±ãµÆ×´Ì¬Í¬²½ÔÆ¶ËºÍapp£¨00-0B£©,ÆäÖÐ00´ú±í¹ØµÆ£¬0A´ú
             -±í²ÊµÆ£¬0B´ú±í×Ô¶¨ÒåÑÕÉ«
 279   1      //       //¡·´ú±íÁÁ¶È( 00 - 03 )
 280   1      //       //¡·´ú±íÒôÁ¿Öµ ( 00 - 0a )
 281   1      //       //¡·´ú±íÔÝÍ£pauseÑ¡Ôñ£¨00±íÊ¾Õý³£²¥·Å,01±íÊ¾ÔÝÍ£²¥·Å£©
 282   1      //       //¡·(È¥µô)£º´ú±í¶¨Ê±Æ÷£¬00(¹Ø/²»¿ªÆô¶¨Ê±)£¬0F(15min)£¬1E(30min)£¬3C(60min)   
 283   1      //       //¡·´ú±íÄÖÖÓ×Ü¿ª¹Ø£¨00 ¹Ø 01: ¿ª£©£¨Ä¬ÈÏ0£©
 284   1      //       //¡·´ú±íÖÜÒ»µ½ÖÜÈÕµÄ¿ª¹Ø£¬Ã¿Ò»ÌìÓÃÒ»¸ö bit ±íÊ¾
 285   1      //       //  0x80 ´ú±íÊÇ·ñÖØ¸´ÄÖÁå
 286   1      //       //  0x01 ´ú±íÖÜÒ»Æô¶¯ÄÖÁå£¬µ«ÊÇÖ»ÏìÒ»´Î£¬ÕâÒ»´ÎÊÇÆßÌìÖ®ÄÚµÄ£¬
 287   1      //       //  0xFF ´ú±íÄÖÁåÈ«¿ª£¬²¢ÇÒÃ¿ÖÜÖØ¸´£¬ÒÔ´ËÀàÍÆ
 288   1      //       //  BIT      7       6    5    4    3    2    1    0
 289   1      //       //  ÐÇÆÚx  repeat    ÈÕ   Áù   Îå    ËÄ   Èý   ¶þ   Ò»  £¨×¢£ºrepeatÎªÃ¿ÖÜ¶¼ÖØ¸´ÄÖÁå£¬·ñÔòÖ»ÏìÒ»´Î
 290   1      //       //¡·´ú±íÄÖÖÓ¶¨Ê±Ê±¼äµã£¨17:3B£©(¶¼ÊÇ16½øÖÆ,:×ó±ßÊÇÄÖÖÓµÄÊ±£¬·¶Î§ÊÇ00-17; :ÓÒ±ßÊÇÄÖÖÓµÄ·Ö£¬·¶Î§ÊÇ00-3B)
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 6   

 291   1      //       //¡·´ú±íÏìÁåÊ±¼ä£¨intÀàÐÍ4¸ö×Ö½Ú£©00-FF (µ¥Î»ÓÉÇ¿´ó¶¨Òå)
 292   1      //       //¡·´ú±íµ±Ç°Ê±¼ä´Á£¬·Ö±ð°´ÕÕÊ®Áù½øÖÆÊý¼ÓÐ±¸Ü±íÊ¾£¬¸ñÊ½ÈçÏÂ£º£¨Ê±/·Ö/Ãë/Äê/ÔÂ/ÈÕ/ÐÇÆÚ£©
 293   1      //       //  ±ÈÈç 2018 Äê 1 ÔÂ 1 ÈÕ 10 Ê± 32 ·Ö 0 ÃëÐÇÆÚ¶þ ÄÇÃ´¸ñÊ½ÊÇ 0a/20/00/12/01/01/02
 294   1      //       //(WIFI_CMD[11]-'0')  //ProgrammaµÄIDºÅÔÝÊ±Ã»ÓÐ£¬ÎªÒÔºóÀ©Õ¹Ô¤±¸   
 295   1      //              alarm.spa_name  =(WIFI_CMD[15]-'0');//µÚ¼¸Ê×¸è
 296   1      //              if(alarm.spa_name>=7)
 297   1      //                      alarm.spa_name=0;
 298   1      //              alarm.color_mode=(WIFI_CMD[18]-'0');//µÆ¹âµÄ¿ª¹Ø
 299   1      //              alarm.color_mode=(WIFI_CMD[18]=='1')?((WIFI_CMD[21]=='1')?COLOR_CHANGE:COLOR_USER):COLOR_OFF;
 300   1      //              alarm.userR_val=char_to_hex(WIFI_CMD[23],WIFI_CMD[24]);//RÖµ  
 301   1      //              alarm.userG_val=char_to_hex(WIFI_CMD[25],WIFI_CMD[26]);//GÖµ  
 302   1      //              alarm.userB_val=char_to_hex(WIFI_CMD[27],WIFI_CMD[28]);//BÖµ  
 303   1      //              alarm.Brightness=(WIFI_CMD[31]-'0');//ÁÁ¶È
 304   1      //              alarm.volume=char_to_hex(WIFI_CMD[33],WIFI_CMD[34]);//ÒôÁ¿
 305   1      //              alarm.play_pause=WIFI_CMD[37]-'0';//ÔÝÍ£²¥·Å
 306   1      //              alarm.Enable=(WIFI_CMD[40]-'0');//ÄÖÖÓ×Ü¿ª¹Ø
 307   1      //              alarm.Week=char_to_hex(WIFI_CMD[42],WIFI_CMD[43]); 
 308   1      //              alarm.Hour=char_to_hex(WIFI_CMD[45],WIFI_CMD[46]);   //ÄÖÖÓÏìµÄÐ¡Ê±µã
 309   1      //              alarm.Minute=char_to_hex(WIFI_CMD[48],WIFI_CMD[49]); 
 310   1      //              alarm.Duration=char_to_hex(WIFI_CMD[51],WIFI_CMD[52]);//³ÖÐøÏìÁåÊ±¼ä£¬×ª»¯ÎªÊýÖµ
 311   1      //              IE3 &= ~0x04;           // Enable WT interrupt
 312   1      //              gRTC_Hour  =char_to_hex(WIFI_CMD[54],WIFI_CMD[55]);
 313   1      //              gRTC_Minute=char_to_hex(WIFI_CMD[57],WIFI_CMD[58]);
 314   1      //              gRTC_Sec   =char_to_hex(WIFI_CMD[60],WIFI_CMD[61]);
 315   1      //              gRTC_Week  =WIFI_CMD[73]-'0';
 316   1      //              gRTC_Week=Week_Table[gRTC_Week];
 317   1      //              IE3 |= 0x04;            // Enable WT interrupt
 318   1      //              if((alarm.Enable)&&(!(alarm.Week&0x7F)))
 319   1      //               Flag_alarm_wake_only=1;
 320   1      //              else
 321   1      //               Flag_alarm_wake_only=0;
 322   1      //      }
 323   1      //      else if(char_compare(WIFI_CMD,"{AlarmOnOff")==0)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 324   1      //      {//$$${AlarmOnOff:[00,00,10/21/33/12/01/1D/01]}\r\n
 325   1      //       //¡·´ú±í Alarm µÄ ID ºÅ 
 326   1      //       //¡·´ú±íÄÖÖÓµÄ¿ª¹Ø
 327   1      //       //¡·´ú±íµ±Ç°Ê±¼ä´Á£¬·Ö±ð°´ÕÕÊ®Áù½øÖÆÊý¼ÓÐ±¸Ü±íÊ¾£¬¸ñÊ½ÈçÏÂ£º£¨Ê±/·Ö/Ãë/Äê/ÔÂ/ÈÕ/ÐÇÆÚ£©
 328   1      //       //      ±ÈÈç 2018 Äê 1 ÔÂ 1 ÈÕ 10 Ê± 32 ·Ö 0 ÃëÐÇÆÚ¶þ ÄÇÃ´¸ñÊ½ÊÇ  0a/20/00/12/01/01/02
 329   1      //       //(WIFI_CMD[11]-'0')  //ProgrammaµÄIDºÅÔÝÊ±Ã»ÓÐ£¬ÎªÒÔºóÀ©Õ¹Ô¤±¸   
 330   1      //              alarm.Enable=(WIFI_CMD[17]-'0'); 
 331   1      //              IE3 &= ~0x04;           // Enable WT interrupt
 332   1      //              gRTC_Hour    =char_to_hex(WIFI_CMD[19],WIFI_CMD[20]);
 333   1      //              gRTC_Minute  =char_to_hex(WIFI_CMD[22],WIFI_CMD[23]);
 334   1      //              gRTC_Sec     =char_to_hex(WIFI_CMD[25],WIFI_CMD[26]);
 335   1      //              gRTC_Week    =WIFI_CMD[38]-'0';
 336   1      //              gRTC_Week=Week_Table[gRTC_Week];
 337   1      //              IE3 |= 0x04;            // Enable WT interrupt
 338   1      //              if((alarm.Enable)&&(!(alarm.Week&0x7F)))
 339   1      //               Flag_alarm_wake_only=1;
 340   1      //              else
 341   1      //               Flag_alarm_wake_only=0;
 342   1      //      }
 343   1                      if(char_compare(WIFI_CMD, "Turn on unit")==0) 
 344   1                      {//$$$Turn on unit\r\n
 345   2                              Uart0Transmit_SendString(Uart0_Receive);
 346   2                              if(PlayMode==PLAY_OFF)
 347   2                              {
 348   3                                      GP389_ON();     
 349   3                                      //ApplicationGP389_ONOFF((PlayMode==PLAY_OFF)?1:0);
 350   3                                      return;
 351   3                              }
 352   2                      }
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 7   

 353   1                      else if(char_compare(WIFI_CMD, "Turn on Lightr")==0)
 354   1                      {//$$$Turn on Lightr\r\n
 355   2                              Uart0Transmit_SendString(Uart0_Receive);
 356   2                              if(PlayMode==PLAY_OFF)
 357   2                                      GP389_ON_APP(); 
 358   2      //                      if(alarm.Runing)//Õâ¸öÒ»¶¨ÊÇ¿ª»ú×´Ì¬²Å½øÈ¥  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 359   2      //                      {
 360   2      //                              alarm.Runing=0;
 361   2      //                              TimerMode=cntTimer=alarm.cntTimer=TIMER_OFF; 
 362   2      //                      }
 363   2                              color_mode=color_mode_bk;
 364   2                              if(color_mode==COLOR_OFF)
 365   2                                      color_mode=COLOR_WHITE;
 366   2                              Light_Brightness=((Light_Brightness==0)?1:Light_Brightness);
 367   2                              return;
 368   2                      }
 369   1                      else if(char_compare(WIFI_CMD, "Change light color")==0)  
 370   1                      {//$$$Change light color Allplay\r\n
 371   2                              Uart0Transmit_SendString(Uart0_Receive);
 372   2                              if(PlayMode==PLAY_OFF)
 373   2                                      GP389_ON_APP();
 374   2      //                      if(alarm.Runing) //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 375   2      //                      {//Õâ¸öÒ»¶¨ÊÇ¿ª»úÇé¿öÏÂ½øÈëµÄ
 376   2      //                              alarm.Runing=0;
 377   2      //                              TimerMode=cntTimer=alarm.cntTimer=TIMER_OFF; 
 378   2      //                      }
 379   2                              color_mode=COLOR_CHANGE;
 380   2                              play_rgb_index=0;
 381   2                              curR_val=0;
 382   2                              curG_val=0;
 383   2                              curB_val=0;
 384   2                              Light_Brightness=((Light_Brightness==0)?1:Light_Brightness);
 385   2                              return;
 386   2                      } 
 387   1                      else if(char_compare(WIFI_CMD, "User color")==0) 
 388   1                      {//$$$User color FFFFFF\r\n(000000-FFFFFF)
 389   2                              Uart0Transmit_SendString(Uart0_Receive);
 390   2                              if(PlayMode==PLAY_OFF)
 391   2                                      GP389_ON_APP();
 392   2      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 393   2      //                      {
 394   2      //                              alarm.Runing=0;
 395   2      //                              TimerMode=cntTimer=alarm.cntTimer=TIMER_OFF; 
 396   2      //                      }
 397   2                              userR_val=char_to_hex(WIFI_CMD[11],WIFI_CMD[12]);
 398   2                              userG_val=char_to_hex(WIFI_CMD[13],WIFI_CMD[14]);
 399   2                              userB_val=char_to_hex(WIFI_CMD[15],WIFI_CMD[16]);
 400   2                              color_mode=COLOR_USER;
 401   2                              Light_Brightness=((Light_Brightness==0)?1:Light_Brightness);
 402   2                              return;
 403   2                      }
 404   1                      else if(char_compare(WIFI_CMD, "Select Sound file")==0) 
 405   1                      {//$$$Select Sound file to play01\r\n
 406   2                              Uart0Transmit_SendString(Uart0_Receive);
 407   2                              if(PlayMode==PLAY_OFF)
 408   2                                      GP389_ON_APP();
 409   2      //                      if(alarm.Runing) //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 410   2      //                      {
 411   2      //                              alarm.Runing=0;
 412   2      //                              TimerMode=cntTimer=alarm.cntTimer=TIMER_OFF; 
 413   2      //                      }
 414   2                              enableMute=0;//½âmute
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 8   

 415   2                              enable_SPApause=0;
 416   2                              PlayMode=PLAY_MUSIC;
 417   2                              spa_name=WIFI_CMD[26]-'0';
 418   2                              if(cur_spa_name==spa_name)
 419   2                                      spa_cmd=SPA_PALY;
 420   2                              Uart0_SendString_3Step=1;
 421   2                              Uart0Transmit_SendString(&SPASongs_Num_Table[spa_name][0]);//Ã¿´Î¸ü¸ÄÒôÀÖ¾Í·¢¸øappÍ¬²½
 422   2                              return;
 423   2                      }
 424   1                      else if(char_compare(WIFI_CMD, "music play")==0)
 425   1                      {//$$$music play\r\n
 426   2                              //Uart0Transmit_SendString(Uart0_Receive);
 427   2                              if(PlayMode==PLAY_OFF)
 428   2                                      GP389_ON_APP();
 429   2      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 430   2      //                      {
 431   2      //                              alarm.Runing=0;
 432   2      //                              TimerMode=cntTimer=alarm.cntTimer=TIMER_OFF; 
 433   2      //                      }
 434   2                              PlayMode=PLAY_MUSIC;
 435   2                              enableMute=0;     //½â³ý¾²Òô
 436   2                              enable_SPApause=0;//Îª0±íÊ¾²¥·Å
 437   2                              if(spa_name==SPA_NONE) //spa_nameÎªÃ¶¾Ù±äÁ¿ÀàÐÍ£¬SPA_WHITENOISEÎªÃ¶¾Ù±äÁ¿ÔªËØ
 438   2                                      spa_name=SPA_BRAHM_LULLABY;
 439   2                              else
 440   2                                      spa_cmd=SPA_PALY;                       
 441   2                              /*if(PlayMode==PLAY_BT)
 442   2                              {
 443   2                                      if(flag_bt_play)
 444   2                                      {
 445   2                                              bt_cmd=BT_PALY;//Ð­ÒéÀïÃæÊÇÒ»ÌõÃüÁî£¬ËùÒÔ²¥·Å/ÔÝÍ£¶¼Òª·¢ËÍÕâÌõ
 446   2                                      }
 447   2                              }*/
 448   2                              return;
 449   2                      }
 450   1                      else if(char_compare(WIFI_CMD,"ProPlay\r\n")==0)//½ÓÊÕµ½¾Í²¥·Å×îºóµÄ½ÓÊÕµ½µÄ$$${Program:[00,01,01,00,FFF
             -FFF,03,0A,00,1E]}\r\nÊý¾Ý
 451   1                      {//$$${Program
 452   2                              Uart0Transmit_SendString(Uart0_Receive);
 453   2                              if(PlayMode==PLAY_OFF)
 454   2                                      GP389_ON_APP();
 455   2      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 456   2      //                      {
 457   2      //                              alarm.Runing=0;
 458   2      //                              TimerMode=cntTimer=alarm.cntTimer=TIMER_OFF; 
 459   2      //                      }
 460   2                              spa_name=program1.spa_name;
 461   2                              color_mode=program1.color_mode;
 462   2                              userR_val=program1.userR_val;
 463   2                              userG_val=program1.userG_val;
 464   2                              userB_val=program1.userB_val;
 465   2                              Light_Brightness=program1.Light_Brightness;
 466   2                              sys_volume=program1.sys_volume;
 467   2                              PlayMode=program1.PlayMode;
 468   2                              enable_SPApause=program1.enable_SPApause;
 469   2                              program1.enableMute=enableMute=((enable_SPApause==0)?0:1);//ÎÞÂÛÖ®Ç°²¥·Å»¹ÊÇÔÝÍ££¬Ö»ÒªÄÖÖÓÏìÓ¦²¢ÇÒÄÖÖÓÔ
             -ÊÐí²¥·Å¾Í²¥·Å
 470   2                              spa_cmd=((enable_SPApause==0)?SPA_PALY:SPA_PAUSE);//ÎÞÂÛÖ®Ç°²¥·Å»¹ÊÇÔÝÍ££¬Ö»ÒªÄÖÖÓÏìÓ¦²¢ÇÒÄÖÖÓÔÊÐí²¥·Å¾
             -Í²¥·Å
 471   2                              TimerMode=program1.TimerMode;
 472   2                              return;
 473   2                      } 
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 9   

 474   1      //              else if(char_compare(WIFI_CMD,"{Program")==0)//¹Ø»ú×´Ì¬ÏÂ´ò¿ª
 475   1      //              {//$$${Program:[00,01,01,00,FFFFFF,03,0A,00,1E]}\r\n
 476   1      //                      Uart0Transmit_SendString(Uart0_Receive);
 477   1      //                      if(PlayMode==PLAY_OFF)
 478   1      //                              GP389_ON_APP();
 479   1      //                      if(alarm.Runing)
 480   1      //                      {
 481   1      //                              alarm.Runing=0;
 482   1      //                              TimerMode=cntTimer=alarm.cntTimer=TIMER_OFF; 
 483   1      //                      }
 484   1      //                      Program1_LaterNum(); //ÏÈ°ÑµÍÊý×Ö¸³¸ø¸ßÊý×Ö£¬
 485   1      //                      program1.spa_name=spa_name=WIFI_CMD[14]-'0';
 486   1      //                      program1.color_mode=color_mode=((WIFI_CMD[17]=='1')?COLOR_WHITE:COLOR_OFF);//µÆ¹âµÄ¿ª¹Ø
 487   1      //                      program1.color_mode=color_mode=((WIFI_CMD[17]=='1')?((WIFI_CMD[20]=='1')?COLOR_CHANGE:COLOR_USER):COL
             -OR_OFF);//ÏÈÅÐ¶ÏÉÏÒ»×éÊÇ·ñ¿ªÆôµÆ¹â£¬Èç¹û¿ªÆôµÆ¹â¾ÍÔÙÅÐ¶ÏÊÇ·ñ¿ªÆô²ÊµÆ£¬Èç¹û²»¿ªÆô¾ÍÊÇÓÃ»§Öµ                                                                                                                                                                                               //Ó
             -Ã»§ÖµÊÇÏÂÃæRGBµÄÖµ
 488   1      //                      program1.userR_val=userR_val=char_to_hex(WIFI_CMD[22],WIFI_CMD[23]);
 489   1      //                      program1.userG_val=userG_val=char_to_hex(WIFI_CMD[24],WIFI_CMD[25]);
 490   1      //                      program1.userB_val=userB_val=char_to_hex(WIFI_CMD[26],WIFI_CMD[27]);
 491   1      //                      program1.Light_Brightness=Light_Brightness=char_to_bcd(WIFI_CMD[29],WIFI_CMD[30]);
 492   1      //                      program1.sys_volume=sys_volume=char_to_hex(WIFI_CMD[32],WIFI_CMD[33]);//ÒôÁ¿
 493   1      //                      program1.PlayMode=PlayMode=PLAY_MUSIC;
 494   1      //                      program1.enable_SPApause=enable_SPApause=WIFI_CMD[36]-'0';
 495   1      //                      program1.enableMute=enableMute=((enable_SPApause==0)?0:1);//ÎÞÂÛÖ®Ç°²¥·Å»¹ÊÇÔÝÍ££¬Ö»ÒªÄÖÖÓÏìÓ¦²¢ÇÒÄÖÖ
             -ÓÔÊÐí²¥·Å¾Í²¥·Å
 496   1      //                      spa_cmd=((enable_SPApause==0)?SPA_PALY:SPA_PAUSE);//ÎÞÂÛÖ®Ç°²¥·Å»¹ÊÇÔÝÍ££¬Ö»ÒªÄÖÖÓÏìÓ¦²¢ÇÒÄÖÖÓÔÊÐí²¥·
             -Å¾Í²¥·Å
 497   1      //                      program1.TimerMode=TimerMode=cntTimer=char_to_hex(WIFI_CMD[38],WIFI_CMD[39]);
 498   1      //                      return;
 499   1      //              }
 500   1                      else if(char_compare(WIFI_CMD,"VER0.\r\n")==0) 
 501   1                      {
 502   2                              return;
 503   2                      }
 504   1                      else if(char_compare(WIFI_CMD,"VER\r\n")==0) 
 505   1                      {
 506   2                              Uart0Transmit_SendString(MCU_VER);//Ã¿´ÎÉý¼¶ÐèÒªÊÖ¶¯¸ÄÐ´ÕâÀï
 507   2                              return;
 508   2                      }
 509   1                      else if(char_compare(WIFI_CMD,"GpSta")==0)
 510   1                      {//×îÖÕ×´Ì¬ÊÇ¹Ø»ú
 511   2                              Uart0_SendString_3Step=0;
 512   2                              cntFlag_ON_OFF=0;
 513   2                              return;//PlayMode=PLAY_OFF;     ÒòÎªÓÐÇ¿ÖÆ¹Ø»ú£¬ËùÒÔ¿ÉÒÔ²»ÒªGP389_OFF()/GP389_ON()
 514   2                      }
 515   1      //              else if(char_compare(WIFI_CMD,"GpSta:[00]\r\n")==0)
 516   1      //              {//×îÖÕ×´Ì¬ÊÇ¿ª»ú£¬
 517   1      //                      Uart0_SendString_3Step=0;
 518   1      //                      cntFlag_ON_OFF=0;
 519   1      //                      return;//PlayMode=PLAY_OFF;     ÒòÎªÓÐÇ¿ÖÆ¹Ø»ú£¬ËùÒÔ¿ÉÒÔ²»ÒªGP389_OFF()/GP389_ON()
 520   1      //              }
 521   1              
 522   1              
 523   1              if(PlayMode!=PLAY_OFF)
 524   1              {
 525   2                      if(char_compare(WIFI_CMD,"{TimeSync")==0)
 526   2                      {//$$${TimeSync:[0A/20/00/12/01/01/02]}\r\n
 527   3                              IE3 &= ~0x04;           // Enable WT interrupt
 528   3                              gRTC_Hour  =char_to_hex(WIFI_CMD[11],WIFI_CMD[12]);
 529   3                              gRTC_Minute=char_to_hex(WIFI_CMD[14],WIFI_CMD[15]);
 530   3                              gRTC_Sec   =char_to_hex(WIFI_CMD[17],WIFI_CMD[18]);
 531   3                              gRTC_Week  =WIFI_CMD[30]-'0';
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 10  

 532   3                              gRTC_Week  =Week_Table[gRTC_Week];
 533   3                              IE3 |= 0x04;            // Enable WT interrupt
 534   3                              Falg_TimeSync_Allow=0;//½ÓÊÕµ½Í¬²½ÐÅÏ¢¾Í²»ÔÙ·¢ËÍÇëÇóÍ¬²½£¬ËùÒÔÖÃÎª0
 535   3                              return;
 536   3                      }       
 537   2                      else if(char_compare(WIFI_CMD, "Turn off unit")==0) 
 538   2                      {//ÕâÌõÐ­ÒéÃüÁîÊÇappÖ±½Ó·¢ËÍ¹ýÀ´µÄ¹Ø»úÃüÁî£¬²»ÓÃÉêÇë¾Í¿ÉÒÔ¹Ø»ú£¬µ«ÊÇÊÕµ½ÕâÌõÃüÁîÒªÅÐ¶Ï
 539   3                       //´ËÊ±²»ÓÃ½øÐÐÅÐ¶ÏÊÇ²»ÊÇÔÚ¹Ø»ú×´Ì¬£¬ÒòÎª¹Ø»úÖ®ºóÐèÒªÉè¶¨µÄ×´Ì¬¶Ô³ÌÐòÎÞÓ°Ïì£¬»òÕß¿ª»úÖ®
 540   3                       //ºó»á³õÊ¼»¯ÕâÐ©×´Ì¬
 541   3                       //$$$Turn off unit\r\n
 542   3                              Uart0Transmit_SendString(Uart0_Receive);
 543   3      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 544   3      //                      {
 545   3      //                              GP389_OFF_AND_AlarmOFF();
 546   3      //                              return;
 547   3      //                      }
 548   3                              
 549   3                              Uart0_SendString_3Step=3;
 550   3                              GP389_OFF();
 551   3                              //ApplicationGP389_ONOFF((PlayMode==PLAY_OFF)?1:0);
 552   3                              return;
 553   3                      }
 554   2                      else if(char_compare(WIFI_CMD, "Turn on BT")==0) 
 555   2                      {//$$$Turn on BT\r\n
 556   3                              PlayMode=PLAY_BT;
 557   3                      }
 558   2                      else if(char_compare(WIFI_CMD, "music pause")==0)
 559   2                      {//$$$music pause\r\n
 560   3                              if(PlayMode==PLAY_MUSIC)
 561   3                              {                                   
 562   4                                      enable_SPApause=1;
 563   4                                      spa_cmd=SPA_PAUSE;
 564   4                              }
 565   3      //                      if(PlayMode==PLAY_BT)
 566   3      //                      {
 567   3      //                              if(flag_bt_play) 
 568   3      //                              {
 569   3      //                                      bt_cmd=BT_PAUSE;//Ð­ÒéÀïÃæÊÇÒ»ÌõÃüÁî£¬ËùÒÔ²¥·Å/ÔÝÍ£¶¼Òª·¢ËÍÕâÌõ
 570   3      //                              }
 571   3      //                      }
 572   3                              return;
 573   3                      }
 574   2                      else if(char_compare(WIFI_CMD,"{MusicStatus")==0)
 575   2                      {
 576   3                              return;
 577   3                      }
 578   2                      else if(char_compare(WIFI_CMD, "Adjust Output Volume")==0)
 579   2                      {//$$$Adjust Output Volume01\r\n
 580   3      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 581   3      //                      {
 582   3      //                              GP389_OFF_AND_AlarmOFF();
 583   3      //                              return;
 584   3      //                      }
 585   3                              sys_volume=char_to_bcd(WIFI_CMD[20],WIFI_CMD[21]);
 586   3                              enableMute=0;
 587   3                      }
 588   2                      else if(char_compare(WIFI_CMD, "volume up")==0) 
 589   2                      {//$$$volume up\r\n
 590   3      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 591   3      //                      {
 592   3      //                              GP389_OFF_AND_AlarmOFF();
 593   3      //                              return;
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 11  

 594   3      //                      }
 595   3                              sys_volume=((sys_volume < 10)?((sys_volume<=8)?(sys_volume += 2):(sys_volume += 1)):10);
 596   3                              enableMute=0;
 597   3                      }
 598   2                      else if(char_compare(WIFI_CMD, "volume down")==0) 
 599   2                      {//volume down\r\n
 600   3      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 601   3      //                      {
 602   3      //                              GP389_OFF_AND_AlarmOFF();
 603   3      //                              return;
 604   3      //                      }
 605   3                              sys_volume=((sys_volume > 1)?((sys_volume>=3)?(sys_volume -= 2):(sys_volume -= 1)):1);
 606   3                              enableMute=0;
 607   3                      }
 608   2                      else if(char_compare(WIFI_CMD, "music mute")==0) 
 609   2                      {//$$$music mute\r\n
 610   3                              enableMute=1;
 611   3                              return;
 612   3                      }
 613   2                      else if(char_compare(WIFI_CMD, "music unmute")==0) 
 614   2                      {//$$$music unmute\r\n
 615   3                              enableMute=0;
 616   3                              return;
 617   3                      }
 618   2                      else if(char_compare(WIFI_CMD, "Set Timer")==0)//ok
 619   2                      {//$$$Set Timer 15\r\n(15/30/60)
 620   3      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 621   3      //                      {
 622   3      //                              GP389_OFF_AND_AlarmOFF();
 623   3      //                              return;
 624   3      //                      }
 625   3                              TimerMode=cntTimer=char_to_bcd(WIFI_CMD[10],WIFI_CMD[11]);
 626   3                      }
 627   2                      else if(char_compare(WIFI_CMD, "Turn off Timer")==0)//ok
 628   2                      {//$$$Turn off Timer\r\n
 629   3      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 630   3      //                      {
 631   3      //                              GP389_OFF_AND_AlarmOFF();
 632   3      //                              return;
 633   3      //                      }
 634   3                              TimerMode=cntTimer=TIMER_OFF;
 635   3                      }
 636   2                      else if(char_compare(WIFI_CMD, "Turn off Lightr")==0)  
 637   2                      {//$$$Turn off Lightr\r\n
 638   3      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 639   3      //                      {
 640   3      //                              GP389_OFF_AND_AlarmOFF();
 641   3      //                              return;
 642   3      //                      }
 643   3                              color_mode=COLOR_OFF;
 644   3                      } 
 645   2                      else if(char_compare(WIFI_CMD,"light up")==0)
 646   2                      {//$$$light up\r\n
 647   3      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 648   3      //                      {
 649   3      //                              GP389_OFF_AND_AlarmOFF();
 650   3      //                              return;
 651   3      //                      }
 652   3                              if(Light_Brightness<3)
 653   3                                      Light_Brightness++;
 654   3                      }
 655   2                      else if(char_compare(WIFI_CMD,"light down")==0)
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 12  

 656   2                      {//$$$light down\r\n
 657   3      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 658   3      //                      {
 659   3      //                              GP389_OFF_AND_AlarmOFF();
 660   3      //                              return;
 661   3      //                      }
 662   3                              if(Light_Brightness>0)
 663   3                                      Light_Brightness--;
 664   3                      }
 665   2                      else if(char_compare(WIFI_CMD,"Adjust Light Brightness")==0)
 666   2                      {//$$$Adjust Light Brightness 01\r\n(01-03)
 667   3      //                      if(alarm.Runing)  //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 668   3      //                      {
 669   3      //                              GP389_OFF_AND_AlarmOFF();
 670   3      //                              return;
 671   3      //                      }
 672   3                              Light_Brightness=char_to_bcd(WIFI_CMD[24],WIFI_CMD[25]);
 673   3                      }
 674   2      //              else if(char_compare(WIFI_CMD,"AlaGpSta\r\n")==0) //ÄÖÖÓ¹¦ÄÜÔÚ001ºÍ003ÖÐÆÁ±ÎÁË
 675   2      //              {//W-G:"$$$AlaGpSta\r\n"
 676   2      //               //G-W:"$$${AlaGpSta:[00,01,01,00,FFFFFF,03,0A,00,01,FF,17:3B,FF]}\r\n"
 677   2      //               //Êý×éÖÐµÚÊý¾ÝÒÔ¶ººÅ·Ö¸ô£¬Êý×ÖÒÔ 16 ½øÖÆ±íÊ¾£¨ÕâÀï²»Ð´"0x"£©£¬´Ó×óµ½ÓÒÒÀ´ÎÃ¿¸ö×Ö¶Î£¨13¸ö×Ö¶Î£©·Ö±ð±íÊ
             -¾£º
 678   2      //               //¡·´ú±í Alarm µÄ ID ºÅ £¨×¢£ºÏÖÔÚÖ»ÓÐÒ»¸öÄÖÖÓ£¬Ä¬ÈÏÎª0£©
 679   2      //               //¡·´ú±íµÚ¼¸Ê×¸è£¨01 - 06£©
 680   2      //               //¡·´ú±í¿ª¹ØµÆ£¨00¹Ø 01¿ª£©
 681   2      //               //¡·´ú±íÊÇ·ñÊÇ²ÊµÆÄ£Ê½£¨00 ¹Ø 01 ¿ª£©£¨×¢£º²ÊµÆÑ­»·£¬Îª1¿ªÆôÑ­»·£©
 682   2      //               //¡·´ú±íµÆµÄRGBÖµ£¨000000 - FFFFFF£©£¨²ÊµÆÑ­»·Õâ¸öÖµÎª000000£©
 683   2      //               //¡·´ú±íÁÁ¶È( 00 - 03 )
 684   2      //               //¡·´ú±íÒôÁ¿Öµ ( 00 - 0a )
 685   2      //               //¡·´ú±íÔÝÍ£pauseÑ¡Ôñ£¨00±íÊ¾Õý³£²¥·Å,01±íÊ¾ÔÝÍ£²¥·Å£©
 686   2      //               //£¨È¥µô£©¡·´ú±í¶¨Ê±Æ÷£¬00(¹Ø/²»¿ªÆô¶¨Ê±)£¬0F(15min)£¬1E(30min)£¬3C(60min)   
 687   2      //               //¡·´ú±íÄÖÖÓ×Ü¿ª¹Ø£¨00 ¹Ø 01: ¿ª£©£¨Ä¬ÈÏ0£©
 688   2      //               //¡·´ú±íÖÜÒ»µ½ÖÜÈÕµÄ¿ª¹Ø£¬Ã¿Ò»ÌìÓÃÒ»¸ö bit ±íÊ¾
 689   2      //               //    0x80 ´ú±íÊÇ·ñÖØ¸´ÄÖÁå
 690   2      //               //    0x01 ´ú±íÖÜÒ»Æô¶¯ÄÖÁå£¬µ«ÊÇÖ»ÏìÒ»´Î£¬ÕâÒ»´ÎÊÇÆßÌìÖ®ÄÚµÄ£¬
 691   2      //               //    0xFF ´ú±íÄÖÁåÈ«¿ª£¬²¢ÇÒÃ¿ÖÜÖØ¸´£¬ÒÔ´ËÀàÍÆ
 692   2      //               //    BIT            7       6    5    4    3    2    1    0
 693   2      //               //    ÐÇÆÚx   repeat  ÈÕ  Áù  Îå  ËÄ  Èý  ¶þ  Ò»  £¨×¢£ºrepeatÎªÃ¿ÖÜ¶¼ÖØ¸´ÄÖÁå£¬·ñÔòÖ»ÏìÒ»´Î£¬ÕâÒ»´Î
 694   2      //               //  ÊÇÆßÌìÖ®ÄÚµÄ£¬¼ÙÈç¶¨Ê±13:00£¬²»ÖØ¸´£¬ÄÇÕâ´Î¼ÆÊ±µ½(7*24*60-1)minÖ®ºó½áÊø£¬¼´ÆßÌìÖ®ºó
 695   2      //               //  µÄ12:59·Ö£©
 696   2      //               //¡·´ú±íÄÖÖÓ¶¨Ê±Ê±¼äµã£¨17:3B£©(¶¼ÊÇ16½øÖÆ,:×ó±ßÊÇÄÖÖÓµÄÊ±£¬·¶Î§ÊÇ00-17; :ÓÒ±ßÊÇÄÖÖÓµÄ·Ö£¬·¶Î§ÊÇ00-3B
             -)
 697   2      //               //¡·´ú±íÏìÁåÊ±¼ä£¨charÀàÐÍ1¸ö×Ö½Ú£©00-FF (µ¥Î»:·ÖÖÓ)
 698   2      //               //£¨È¥µô£©¡·´ú±íµ±Ç°Ê±¼ä´Á£¬·Ö±ð°´ÕÕÊ®Áù½øÖÆÊý¼ÓÐ±¸Ü±íÊ¾£¬¸ñÊ½ÈçÏÂ£º£¨Ê±/·Ö/Ãë/Äê/ÔÂ/ÈÕ/ÐÇÆÚ£© 
 699   2      //               //    ±ÈÈç 2018 Äê 1 ÔÂ 1 ÈÕ 10 Ê± 32 ·Ö 0 ÃëÐÇÆÚ¶þ ÄÇÃ´¸ñÊ½ÊÇ 0a/20/00/12/01/01/02
 700   2      //                      char  code respAlaGpSta[]={"$$${AlaGpSta:[00,00,00,00,000000,00,00,00,00,00,00:00,00]}\r\n"};
 701   2      //                      for(i=0;i<UART0_LEN_BUFFER;i++)
 702   2      //                              Uart0_Receive[i]=0x00;
 703   2      //                      for(i=0;i<62;i++)
 704   2      //                              Uart0_Receive[i]=respAlaGpSta[i];
 705   2      //                      hex_to_char(&Uart0_Receive[14],0);//IDºÅÄ¬ÈÏÎª0
 706   2      //                      hex_to_char(&Uart0_Receive[17],((alarm.spa_name!=0)?alarm.spa_name:7));//Ê×ÏÈÅÐ¶ÏÊÇ²»ÊÇÒôÀÖÄ£Ê½£¬Èç¹û
             -ÊÇ£¬ÊÇµÚ¼¸Ê×¸è£¬Èç¹û²»ÊÇ¾Í·µ»ØÔÝÍ££¬7
 707   2      //                      hex_to_char(&Uart0_Receive[20],((alarm.color_mode==COLOR_OFF)?0:1));//¿ª¹ØµÆ
 708   2      //                      hex_to_char(&Uart0_Receive[23],(((alarm.color_mode==COLOR_CHANGE)?1:0)));//ÊÇ·ñÊÇ²ÊµÆÄ£Ê½£¨Ñ­»·½¥±äÄ£
             -Ê½£©
 709   2      //                      hex_to_char(&Uart0_Receive[26],alarm.userR_val);
 710   2      //                      hex_to_char(&Uart0_Receive[28],alarm.userG_val);
 711   2      //                      hex_to_char(&Uart0_Receive[30],alarm.userB_val);
 712   2      //                      hex_to_char(&Uart0_Receive[33],alarm.Brightness);//ÁÁ¶È
 713   2      //                      hex_to_char(&Uart0_Receive[36],alarm.volume);//ÒôÁ¿
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 13  

 714   2      //                      hex_to_char(&Uart0_Receive[39],alarm.play_pause);
 715   2      //                      hex_to_char(&Uart0_Receive[42],alarm.Enable);
 716   2      //                      hex_to_char(&Uart0_Receive[45],alarm.Week);
 717   2      //                      hex_to_char(&Uart0_Receive[48],alarm.Hour);
 718   2      //                      hex_to_char(&Uart0_Receive[51],alarm.Minute);
 719   2      //                      hex_to_char(&Uart0_Receive[54],alarm.Duration);
 720   2      //                      Uart0_SendString_3Step=2;
 721   2      //              }
 722   2                      else if(char_compare(WIFI_CMD,"NorGpSta\r\n")==0)
 723   2                      {//W-G:"$$$NorGpSta\r\n"
 724   3                       //G-W:"$$${NorGpSta:[00,00,01,01,FFFFFF,03,0A,00,1E]}\r\n"
 725   3                              char  code respNorGpSta[]={"$$${NorGpSta:[00,00,00,00,000000,00,00,00,00]}\r\n"};
 726   3                              for(i=0;i<UART0_LEN_BUFFER;i++)
 727   3                                      Uart0_Receive[i]=0x00;
 728   3                              for(i=0;i<48;i++)
 729   3                                      Uart0_Receive[i]=respNorGpSta[i];
 730   3                              hex_to_char(&Uart0_Receive[14],1);//ÔÚÕâÀïÊÇ¿ª»ú
 731   3                              hex_to_char(&Uart0_Receive[17],((PlayMode==PLAY_MUSIC)?spa_name:7));//Ê×ÏÈÅÐ¶ÏÊÇ²»ÊÇÒôÀÖÄ£Ê½£¬Èç¹ûÊÇ£¬Ê
             -ÇµÚ¼¸Ê×¸è£¬Èç¹û²»ÊÇ¾Í·µ»ØÔÝÍ££¬7
 732   3                              hex_to_char(&Uart0_Receive[20],(color_mode==COLOR_OFF)?0:1);
 733   3                              hex_to_char(&Uart0_Receive[23],(color_mode==COLOR_CHANGE)?0:1);//ÊÇ·ñÊÇ²ÊµÆÄ£Ê½£¨Ñ­»·½¥±äÄ£Ê½£©
 734   3                              hex_to_char(&Uart0_Receive[26],userR_val);
 735   3                              hex_to_char(&Uart0_Receive[28],userG_val);
 736   3                              hex_to_char(&Uart0_Receive[30],userB_val);
 737   3                              hex_to_char(&Uart0_Receive[33],Light_Brightness);
 738   3                              hex_to_char(&Uart0_Receive[36],sys_volume);
 739   3                              hex_to_char(&Uart0_Receive[39],enable_SPApause);
 740   3                              hex_to_char(&Uart0_Receive[42],cntTimer);
 741   3                              Uart0_SendString_3Step=2;
 742   3                      }
 743   2                      else if(char_compare(WIFI_CMD," update")==0) 
 744   2                      {//mcu update+0X43A4+0X0044,½ÓÊÕµ½Õâ¸öÐÅÏ¢¿ªÊ¼Éý¼¶
 745   3                              Update_ByteSizeSum=(char_to_hex(WIFI_CMD[10],WIFI_CMD[11])<<8)|char_to_hex(WIFI_CMD[12],WIFI_CMD[13]);/
             -/¶àÉÙ¸ö×Ö½Ú£¬µØÎ»ÔÚÇ°£¬¸ßÎ»ÔÚºó
 746   3                              Update_PacketSum  =(char_to_hex(WIFI_CMD[17],WIFI_CMD[18])<<8)|char_to_hex(WIFI_CMD[19],WIFI_CMD[20]);/
             -/¶àÉÙ¸ö°ü
 747   3                              update_handle();
 748   3                      }
 749   2                      else if(char_compare(WIFI_CMD,"ATWQ\r\n")==0) 
 750   2                      {//$$$ATWQ\r\n
 751   3                              Uart0_SendString_3Step=0;
 752   3                              return;
 753   3                      }
 754   2                      else if(char_compare(WIFI_CMD,"VER\r\n")==0) 
 755   2                      {
 756   3                              Uart0Transmit_SendString(MCU_VER);//Ã¿´ÎÉý¼¶ÐèÒªÊÖ¶¯¸ÄÐ´ÕâÀï
 757   3                              return;
 758   3                      }
 759   2                      else if(char_compare(WIFI_CMD,"Enter TestMode:")==0) 
 760   2                      {
 761   3                              Uart0_SendString_3Step=0;
 762   3                              cntFlash=0;
 763   3                              Led_Flash=0;
 764   3                              setFactory=1;//ÖÃÒ»ÈÃÈý¸ötimerµÆ³£ÁÁÈýÃë
 765   3                              PlayMode=PLAY_ON;
 766   3                              bt_send_cmd(BT_CLEAR_LIST);//Çå³ýÀ¶ÑÀÁÐ±íÁÐ±í
 767   3                              return;
 768   3                      }
 769   2                      Uart0Transmit_SendString(Uart0_Receive);
 770   2                      ////////////////////////////////////////////////////////////////////////////////////
 771   2                      ////////////////////////////////////////////////////////////////////////////////////
 772   2              }
C51 COMPILER V9.00   WIFI_MODE                                                             08/18/2018 08:42:52 PAGE 14  

 773   1              else //¹Ø»ú×´Ì¬ÏÂ½ÓÊÕÌØ¶¨wifiÊý¾Ý
 774   1              {
 775   2                      if(char_compare(WIFI_CMD,"{NorGpSta")==0)
 776   2                      {//W-G:"$$$NorGpSta\r\n"
 777   3                       //G-W:"$$${NorGpSta:[00,00,01,01,FFFFFF,03,0A,00,1E]}\r\n"
 778   3                              char  code respNorGpSta[]={"$$${NorGpSta:[00,00,00,00,000000,00,00,00,00]}\r\n"};
 779   3                              for(i=0;i<UART0_LEN_BUFFER;i++)
 780   3                                      Uart0_Receive[i]=0x00;
 781   3                              for(i=0;i<48;i++)
 782   3                                      Uart0_Receive[i]=respNorGpSta[i];
 783   3                              hex_to_char(&Uart0_Receive[14],0);//ÔÚÕâÀïÊÇ¿ª»ú
 784   3                              hex_to_char(&Uart0_Receive[17],((PlayMode==PLAY_MUSIC)?spa_name:7));//Ê×ÏÈÅÐ¶ÏÊÇ²»ÊÇÒôÀÖÄ£Ê½£¬Èç¹ûÊÇ£¬Ê
             -ÇµÚ¼¸Ê×¸è£¬Èç¹û²»ÊÇ¾Í·µ»ØÔÝÍ££¬7
 785   3                              hex_to_char(&Uart0_Receive[20],(color_mode==COLOR_OFF)?0:1);
 786   3                              hex_to_char(&Uart0_Receive[23],(color_mode==COLOR_CHANGE)?0:1);//ÊÇ·ñÊÇ²ÊµÆÄ£Ê½£¨Ñ­»·½¥±äÄ£Ê½£©
 787   3                              hex_to_char(&Uart0_Receive[26],userR_val);
 788   3                              hex_to_char(&Uart0_Receive[28],userG_val);
 789   3                              hex_to_char(&Uart0_Receive[30],userB_val);
 790   3                              hex_to_char(&Uart0_Receive[33],Light_Brightness);
 791   3                              hex_to_char(&Uart0_Receive[36],sys_volume);
 792   3                              hex_to_char(&Uart0_Receive[39],enable_SPApause);
 793   3                              hex_to_char(&Uart0_Receive[42],cntTimer);
 794   3                              Uart0_SendString_3Step=2;
 795   3                      }
 796   2                      Uart0Transmit_SendString(Uart0_Receive);
 797   2              }
 798   1      }
 799          
 800          /*******************************************************************
 801          º¯ÊýÔ­ÐÍ£º
 802          ÊäÈë²ÎÊý£º
 803          Êä³ö²ÎÊý£º
 804          º¯Êý¹¦ÄÜ£ºÔÚappÉÏ·¢ËÍ¡°×´Ì¬¡°¹¦ÄÜ¸ø»úÌ¨£¬×´Ì¬¹¦ÄÜÊÇÍ¬Ê±ÉèÖÃºÃ¼¸¸ö²Ù×÷£¨ÒôÀÖ£¬µÆ¹âµÈ£©£¬È»ºóÒ»Æð·¢¹ýÀ´
 805                    È»ºó»úÌ¨¼ÇÂ¼ÏÂÀ´µÚ¼¸´Î·¢µÄ£¬°ÑÐÂµÄÒ»´Î¸´ÖÆ¸øprogram1£¬ÉÏÒ»´ÎµÄprogram1¸´ÖÆ¸øprogram2£¬ÒòÎª
 806                            Êý¾ÝºÍÊý¾ÝÀàÐÍ¶¼Ò»Ñù£¬ËùÒÔ¿ÉÒÔÖ±½Ó¸´ÖÆ
 807          *******************************************************************/
 808          //void Program1_LaterNum()
 809          //{
 810          //      program3=program2;//ÒòÎªÊý¾ÝºÍÊý¾ÝÀàÐÍÍêÈ«Ò»Ñù£¬ËùÒÔ¿ÉÒÔÖ±½Ó¸³Öµ
 811          //      program2=program1;
 812          //}
 813          
 814          
 815          
 816          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2985    ----
   CONSTANT SIZE    =    715    ----
   XDATA SIZE       =   ----      14
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
